<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Track Your BUS</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>

    
  </head>
  <body>
    <div class="bg-white dark:bg-white">
      <div id="root"></div>
      <script type="module" src="/src/main.jsx">

                fetch('http://localhost:3000/login', {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/json'
                  },
                  body: JSON.stringify({
                      username: document.getElementById('username').value,
                      password: document.getElementById('password').value
                  })
              })
              .then(response => {
                  if (!response.ok) {
                      throw new Error('Invalid Credentials');
                  }
                  return response.text();
              })
              .then(data => {
                  alert(data); // Login Successful
              })
              .catch(error => {
                  alert(error.message);
              });



              // server.js

        const express = require('express');
        const mysql = require('mysql');
        const cors = require('cors');
        const app = express();

        // Enable CORS (important)
        app.use(cors());

        // Parse JSON bodies (as sent by API clients)
        app.use(express.json());

        // MySQL connection
        const db = mysql.createConnection({
          host: 'localhost',
          user: 'root',
          password: 'khushbuparti@12', // replace with your MySQL password
          database: 'users'
        });

        // Connect to database
        db.connect((err) => {
          if (err) {
            console.error('Database connection failed:', err);
            return;
          }
          console.log('Connected to MySQL database');
        });

        // Example API route: login
        app.post('/login', (req, res) => {
          const { username, password } = req.body;

          if (!username || !password) {
            return res.status(400).json({ error: 'Please provide username and password' });
          }

          const query = 'SELECT * FROM sfs WHERE username = ? AND password = ?';
          db.query(query, [username, password], (err, results) => {
            if (err) {
              console.error('Error while querying:', err);
              return res.status(500).json({ error: 'Database error' });
            }

            if (results.length > 0) {
              res.json({ message: 'Login successful', user: results[0] });
            } else {
              res.status(401).json({ error: 'Invalid credentials' });
            }
          });
        });

        // Start server
        const PORT = 3000;
        app.listen(PORT, () => {
          console.log(`Backend server running on http://localhost:${PORT}`);
        });

        export default server;
      </script>



    </div>
  </body>
</html>
